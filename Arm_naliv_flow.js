[{"id":"6827c201.44d26c","type":"tab","label":"ARM Naliv"},{"id":"341c3350.a4422c","type":"modbus-flex-write","z":"6827c201.44d26c","name":"","showStatusActivities":false,"showErrors":false,"server":"5d4a5441.06d74c","x":650,"y":100,"wires":[[],["a6da5fa4.f377d"]]},{"id":"cc89cfcf.c0b06","type":"function","z":"6827c201.44d26c","name":"R_5004","func":"var order = flow.get('order');\nmsg.req = '';\nmsg.res = '';\nmsg.payload = { \n    'value': order.orderId, \n    'fc': 6, \n    'unitid': 1, \n    'address': 5004 , \n    'quantity': 1 \n    \n} ;\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":100,"wires":[["341c3350.a4422c"]]},{"id":"b3fd5df5.06e9a","type":"debug","z":"6827c201.44d26c","name":"","active":true,"console":"false","complete":"payload","x":830,"y":200,"wires":[]},{"id":"19f53f48.9e6111","type":"function","z":"6827c201.44d26c","name":"","func":"var order = msg.payload;\n// var order = \n// {\n//   orderId: 1234,\n//   track_1: 0,\n//   track_2: 2,\n//   track_3: 0,\n//   volume: 8000\n// };\n\nflow.set('order',order);\nmsg.payload = \"\";\nreturn msg;","outputs":"1","noerr":0,"x":350,"y":100,"wires":[["cc89cfcf.c0b06"]]},{"id":"95ae3977.c24668","type":"http in","z":"6827c201.44d26c","name":"","url":"/setOrders","method":"post","swaggerDoc":"","x":120,"y":20,"wires":[["19f53f48.9e6111","e581d1ab.4abc4","49881f5f.9f8db"]]},{"id":"fe4929d.54e73d8","type":"inject","z":"6827c201.44d26c","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"x":80,"y":100,"wires":[["19f53f48.9e6111"]]},{"id":"a6da5fa4.f377d","type":"function","z":"6827c201.44d26c","name":"R_5006","func":"var order = flow.get('order');\nmsg.payload = { \n    'value':order.volume, \n    'fc': 6, \n    'unitid': 1, \n    'address': 5006, \n    'quantity': 2 \n    \n} ;\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":160,"wires":[["6ec54daf.930d64"]]},{"id":"6ec54daf.930d64","type":"modbus-flex-write","z":"6827c201.44d26c","name":"","showStatusActivities":false,"showErrors":false,"server":"5d4a5441.06d74c","x":650,"y":160,"wires":[[],["36d2fb36.55a8f4"]]},{"id":"36d2fb36.55a8f4","type":"function","z":"6827c201.44d26c","name":"R_5005","func":"var order = flow.get('order');\nmsg.payload = { \n    'value':order.track, \n    'fc': 6, \n    'unitid': 1, \n    'address': 5005, \n    'quantity': 1 \n    \n} ;\nreturn msg;","outputs":1,"noerr":0,"x":480,"y":200,"wires":[["aa5937b7.c85218"]]},{"id":"aa5937b7.c85218","type":"modbus-flex-write","z":"6827c201.44d26c","name":"","showStatusActivities":false,"showErrors":false,"server":"5d4a5441.06d74c","x":650,"y":200,"wires":[[],["b3fd5df5.06e9a"]]},{"id":"88a28039.7251e","type":"comment","z":"6827c201.44d26c","name":"Date_order 40092  40093  40094+1 40096+1  40108+1  40120+1  40122-40126 40127-40131 ","info":"40092 \n40093 \n40094+1\n40096+1 \n40108+1 \n40120+1 \n40122-40126\n40127-40131 \n\n","x":390,"y":760,"wires":[]},{"id":"e8f49779.3786e8","type":"http in","z":"6827c201.44d26c","name":"","url":"/status","method":"get","swaggerDoc":"","x":120,"y":440,"wires":[["9e09af31.592ff"]]},{"id":"f9f9a218.381d2","type":"function","z":"6827c201.44d26c","name":"with_1C","func":"//var order = msg.payload;\nvar regime_get = \n{\n  \"order_req\": 0,\n  \"route\": 0,\n  \"task_volume\": 0,\n  \"fact_volume\": 0,\n  \"mid_temperature\": 0,\n  \"mid_density\": 0,\n  \"date_start\": 0,\n  \"date_finished\": 0\n };\nmsg.payload = regime_get;\nflow.set('regime_get',regime_get);\nflow.set('res2',msg.res);\nmsg.res = '';\nmsg.req = '';\nreturn msg;","outputs":"1","noerr":0,"x":380,"y":860,"wires":[["55958179.33a5c"]]},{"id":"55958179.33a5c","type":"function","z":"6827c201.44d26c","name":"R_40092","func":"msg.payload = { \n    'fc': 3, \n    'unitid': 1, \n    'address': 92 , \n    'quantity': 1 \n} ;\nreturn msg;","outputs":1,"noerr":0,"x":220,"y":960,"wires":[["b27c267.8e8f1d8"]]},{"id":"132d03b7.c8572c","type":"inject","z":"6827c201.44d26c","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"x":170,"y":860,"wires":[["f9f9a218.381d2"]]},{"id":"209e459d.da983a","type":"debug","z":"6827c201.44d26c","name":"","active":true,"console":"false","complete":"payload","x":770,"y":1100,"wires":[]},{"id":"3e9aa8aa.fb9228","type":"function","z":"6827c201.44d26c","name":"40093","func":"var regime_get = flow.get('regime_get');\nregime_get.order_req = msg.payload;\nflow.set('regime_get',regime_get);\n\nmsg.payload = { \n    'fc': 3, \n    'unitid': 1, \n    'address': 93 , \n    'quantity': 1 \n    \n} ;\nreturn msg;","outputs":"1","noerr":0,"x":167,"y":1027,"wires":[["56bf8b0f.8d59e4"]]},{"id":"2bb50aed.789426","type":"function","z":"6827c201.44d26c","name":"40094+1","func":"var regime_get = flow.get('regime_get');\nregime_get.route = msg.payload;\nflow.set('regime_get',regime_get);\n\nmsg.payload = { \n    'fc': 3, \n    'unitid': 1, \n    'address': 94 , \n    'quantity': 2 \n    \n};\nreturn msg;","outputs":"1","noerr":0,"x":158,"y":1074,"wires":[["8622a920.f307f8"]]},{"id":"741aec0.e1e3214","type":"function","z":"6827c201.44d26c","name":"40096+1","func":"var regime_get = flow.get('regime_get');\nregime_get.task_volume = msg.payload;\nflow.set('regime_get',regime_get);\n\nmsg.payload = { \n    'fc': 3, \n    'unitid': 1, \n    'address': 96 , \n    'quantity': 2 \n    \n} ;\nreturn msg;","outputs":"1","noerr":0,"x":155,"y":1115,"wires":[["40ed9e29.f20f5"]]},{"id":"410a8ad8.01b924","type":"function","z":"6827c201.44d26c","name":"400108+1","func":"var regime_get = flow.get('regime_get');\nregime_get.fact_volume = msg.payload;\nflow.set('regime_get',regime_get);\n\nmsg.payload = { \n    'fc': 3, \n    'unitid': 1, \n    'address': 108 , \n    'quantity': 2 \n    \n} ;\nreturn msg;","outputs":"1","noerr":0,"x":157,"y":1161,"wires":[["38d07f06.59c42"]]},{"id":"f1503471.0e3bc8","type":"function","z":"6827c201.44d26c","name":"400120+1","func":"var regime_get = flow.get('regime_get');\nregime_get.mid_temperature = msg.payload;\nflow.set('regime_get',regime_get);\n\nmsg.payload = { \n    'fc': 3, \n    'unitid': 1, \n    'address': 120 , \n    'quantity': 2 \n    \n} ;\nreturn msg;","outputs":"1","noerr":0,"x":157,"y":1204,"wires":[["b67a5304.99f97"]]},{"id":"5d4e789d.436068","type":"function","z":"6827c201.44d26c","name":"40122-40126","func":"var regime_get = flow.get('regime_get');\nregime_get.mid_density = msg.payload;\nflow.set('regime_get',regime_get);\n\nmsg.payload = { \n    'fc': 3, \n    'unitid': 1, \n    'address': 122 , \n    'quantity': 5 \n    \n} ;\nreturn msg;","outputs":"1","noerr":0,"x":150,"y":1260,"wires":[["c7a07d03.f7202"]]},{"id":"c2cb84c4.91cb78","type":"function","z":"6827c201.44d26c","name":"40127-40131 ","func":"var regime_get = flow.get('regime_get');\nregime_get.date_start = msg.payload;\nflow.set('regime_get',regime_get);\n\nmsg.payload = { \n    'fc': 3, \n    'unitid': 1, \n    'address': 127 , \n    'quantity': 5\n    \n} ;\nreturn msg;","outputs":"1","noerr":0,"x":150,"y":1300,"wires":[["6b6721bd.0f056"]]},{"id":"e581d1ab.4abc4","type":"debug","z":"6827c201.44d26c","name":"","active":false,"console":"false","complete":"false","x":270,"y":160,"wires":[]},{"id":"49881f5f.9f8db","type":"http response","z":"6827c201.44d26c","name":"send to 1C","x":350,"y":20,"wires":[]},{"id":"486afa29.4bc8e4","type":"http in","z":"6827c201.44d26c","name":"","url":"/status","method":"post","swaggerDoc":"","x":120.25,"y":556.7499923706055,"wires":[["d480b459.5e8528"]]},{"id":"d480b459.5e8528","type":"function","z":"6827c201.44d26c","name":"","func":"var cmd = msg.payload;\nvar cmd = \n{\n  \"cmd\":2\n};\n\nflow.set('cmd',cmd);\nmsg.payload = \"\";\nreturn msg;","outputs":"1","noerr":0,"x":310,"y":560,"wires":[["6c5b3ff3.df2e8"]]},{"id":"6c5b3ff3.df2e8","type":"function","z":"6827c201.44d26c","name":"R_5002","func":"var cmd = flow.get('cmd');\nmsg.req = '';\nmsg.res = '';\nmsg.payload = { \n    'value': cmd.cmd, \n    'fc': 6, \n    'unitid': 1, \n    'address': 5002 , \n    'quantity': 1 \n    \n} ;\nreturn msg;","outputs":1,"noerr":0,"x":470.25,"y":556.7499923706055,"wires":[["d3a2dd7f.347aa"]]},{"id":"3d95dd8d.d87252","type":"debug","z":"6827c201.44d26c","name":"","active":true,"console":"false","complete":"payload","x":690,"y":360,"wires":[]},{"id":"ca564506.db3438","type":"inject","z":"6827c201.44d26c","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"x":90,"y":400,"wires":[["9e09af31.592ff"]]},{"id":"d3a2dd7f.347aa","type":"modbus-flex-write","z":"6827c201.44d26c","name":"","showStatusActivities":false,"showErrors":false,"server":"5d4a5441.06d74c","x":640.25,"y":556.7499923706055,"wires":[[],["d4427682.9ec0f8"]]},{"id":"d4427682.9ec0f8","type":"debug","z":"6827c201.44d26c","name":"","active":false,"console":"false","complete":"payload","x":710,"y":620,"wires":[]},{"id":"b92a475c.fd1df8","type":"modbus-flex-getter","z":"6827c201.44d26c","name":"","showStatusActivities":false,"showErrors":false,"server":"5d4a5441.06d74c","x":500.25,"y":436.74999237060547,"wires":[["b8f2a494.c57eb8"],["3d95dd8d.d87252"]]},{"id":"9e09af31.592ff","type":"function","z":"6827c201.44d26c","name":"R_5002","func":"msg.payload = { \n    'fc': 3, \n    'unitid': 1, \n    'address': 5002 , \n    'quantity': 1 \n    \n} ;\nflow.set('res',msg.res);\nmsg.req = '';\nmsg.res = '';\nreturn msg;\n\n","outputs":1,"noerr":0,"x":314.25,"y":436.74999237060547,"wires":[["b92a475c.fd1df8"]]},{"id":"bb398ecf.6b61b","type":"comment","z":"6827c201.44d26c","name":"Read_R5002","info":"","x":410,"y":360,"wires":[]},{"id":"48ce71c6.96334","type":"comment","z":"6827c201.44d26c","name":"Write_R5002","info":"","x":430,"y":500,"wires":[]},{"id":"7fdf34a0.aea48c","type":"inject","z":"6827c201.44d26c","name":"","topic":"","payload":"","payloadType":"str","repeat":"","crontab":"","once":false,"x":90,"y":520,"wires":[["d480b459.5e8528"]]},{"id":"d1ebbd58.8bb8f","type":"http response","z":"6827c201.44d26c","name":"","x":790,"y":500,"wires":[]},{"id":"b8f2a494.c57eb8","type":"function","z":"6827c201.44d26c","name":"set response","func":"msg.res = flow.get('res');\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":500,"wires":[["d1ebbd58.8bb8f"]]},{"id":"1ae1f0d1.b3dd6f","type":"http in","z":"6827c201.44d26c","name":"","url":"/status/data","method":"get","swaggerDoc":"","x":140,"y":800,"wires":[["f9f9a218.381d2"]]},{"id":"b27c267.8e8f1d8","type":"modbus-flex-getter","z":"6827c201.44d26c","name":"","showStatusActivities":false,"showErrors":false,"server":"5d4a5441.06d74c","x":450,"y":960,"wires":[["3e9aa8aa.fb9228"],[]]},{"id":"56bf8b0f.8d59e4","type":"modbus-flex-getter","z":"6827c201.44d26c","name":"","showStatusActivities":false,"showErrors":false,"server":"5d4a5441.06d74c","x":410,"y":1020,"wires":[["2bb50aed.789426"],[]]},{"id":"8622a920.f307f8","type":"modbus-flex-getter","z":"6827c201.44d26c","name":"","showStatusActivities":false,"showErrors":false,"server":"5d4a5441.06d74c","x":390,"y":1080,"wires":[["741aec0.e1e3214"],[]]},{"id":"40ed9e29.f20f5","type":"modbus-flex-getter","z":"6827c201.44d26c","name":"","showStatusActivities":false,"showErrors":false,"server":"5d4a5441.06d74c","x":390,"y":1120,"wires":[["410a8ad8.01b924"],[]]},{"id":"38d07f06.59c42","type":"modbus-flex-getter","z":"6827c201.44d26c","name":"","showStatusActivities":false,"showErrors":false,"server":"5d4a5441.06d74c","x":390,"y":1160,"wires":[["f1503471.0e3bc8"],[]]},{"id":"b67a5304.99f97","type":"modbus-flex-getter","z":"6827c201.44d26c","name":"","showStatusActivities":false,"showErrors":false,"server":"5d4a5441.06d74c","x":390,"y":1200,"wires":[["5d4e789d.436068"],[]]},{"id":"c7a07d03.f7202","type":"modbus-flex-getter","z":"6827c201.44d26c","name":"","showStatusActivities":false,"showErrors":false,"server":"5d4a5441.06d74c","x":390,"y":1240,"wires":[["c2cb84c4.91cb78"],[]]},{"id":"6b6721bd.0f056","type":"modbus-flex-getter","z":"6827c201.44d26c","name":"","showStatusActivities":false,"showErrors":false,"server":"5d4a5441.06d74c","x":390,"y":1280,"wires":[["a284aa2d.bc0b48"],[]]},{"id":"18e1b434.c30afc","type":"function","z":"6827c201.44d26c","name":"","func":"\nreturn msg;","outputs":1,"noerr":0,"x":590,"y":1340,"wires":[["c521c8fe.a3c528"]]},{"id":"c521c8fe.a3c528","type":"function","z":"6827c201.44d26c","name":"response","func":"msg.res = flow.get('res2');\nmsg.payload = flow.get('regime_get');\nreturn msg;","outputs":1,"noerr":0,"x":680,"y":1240,"wires":[["9454a409.aebae8","209e459d.da983a"]]},{"id":"9454a409.aebae8","type":"http response","z":"6827c201.44d26c","name":"","x":820,"y":1220,"wires":[]},{"id":"a284aa2d.bc0b48","type":"function","z":"6827c201.44d26c","name":"40127-40131 ","func":"var regime_get = flow.get('regime_get');\nregime_get.date_finished = msg.payload;\nflow.set('regime_get',regime_get);\n\nmsg.payload = { \n    'fc': 3, \n    'unitid': 1, \n    'address': 127 , \n    'quantity': 5\n    \n} ;\nreturn msg;","outputs":"1","noerr":0,"x":150,"y":1360,"wires":[["d838bb0e.f4a938"]]},{"id":"d838bb0e.f4a938","type":"modbus-flex-getter","z":"6827c201.44d26c","name":"","showStatusActivities":false,"showErrors":false,"server":"5d4a5441.06d74c","x":370,"y":1360,"wires":[[],["18e1b434.c30afc"]]},{"id":"5d4a5441.06d74c","type":"modbus-client","z":"","name":"","clienttype":"tcp","bufferCommands":false,"stateLogEnabled":false,"tcpHost":"192.168.0.201","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"1000","reconnectTimeout":"2000"}]