[{"id":"d86d70f7.c6ef2","type":"tab","label":"Desktop_reader","disabled":false,"info":""},{"id":"7f2f8e1d.b680e","type":"serial-port","z":"","serialport":"/dev/ttyUSB0","serialbaud":"115200","databits":"8","parity":"none","stopbits":"1","waitfor":"","newline":"1000","bin":"bin","out":"time","addchar":"","responsetimeout":"10000"},{"id":"4ca52c88.c97e84","type":"function","z":"d86d70f7.c6ef2","name":"length","func":"var epc = msg.payload;\nvar lengEpc = epc.length;\nif(lengEpc > 12){\n    return msg;\n}\n","outputs":1,"noerr":0,"x":230,"y":180,"wires":[["268e3b54.37a0f4"]]},{"id":"c38447e0.5a74f8","type":"serial in","z":"d86d70f7.c6ef2","name":"","serial":"7f2f8e1d.b680e","x":90,"y":180,"wires":[["4ca52c88.c97e84","b59ef378.4b24"]]},{"id":"268e3b54.37a0f4","type":"function","z":"d86d70f7.c6ef2","name":"main filter","func":"var epc = msg.payload;\nvar epcStr = epc.slice(7, 31);\n\n\nvar keycode = \"\";\nvar el = \"\";\n\n\nepcStr.forEach(function(element) {\n  if (element.toString('16').length <2) el = \"0\" + element.toString('16'); else el = element.toString('16');\n  keycode = keycode + el;\n});\n\nmsg.payload = keycode.substring(0,24);\nflow.set(\"keycode\",msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":360,"y":180,"wires":[["cd46eeaf.c4b36","7f640c07.871314"]]},{"id":"b59ef378.4b24","type":"debug","z":"d86d70f7.c6ef2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":250,"y":220,"wires":[]},{"id":"cd46eeaf.c4b36","type":"debug","z":"d86d70f7.c6ef2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":530,"y":180,"wires":[]},{"id":"6557823b.b9efdc","type":"http response","z":"d86d70f7.c6ef2","name":"","statusCode":"","headers":{},"x":670,"y":220,"wires":[]},{"id":"2ce2370a.b93cd8","type":"function","z":"d86d70f7.c6ef2","name":"zaput","func":"msg.payload = Buffer.from(\"a004018901d1\",\"hex\");\nflow.set(\"res\",msg.res);\nflow.set(\"req\",msg.req);\nreturn msg;","outputs":1,"noerr":0,"x":330,"y":40,"wires":[["562f52e5.4f612c"]]},{"id":"b63cc3ff.5c677","type":"inject","z":"d86d70f7.c6ef2","name":"","topic":"","payload":"","payloadType":"date","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":100,"y":40,"wires":[["2ce2370a.b93cd8"]]},{"id":"562f52e5.4f612c","type":"serial out","z":"d86d70f7.c6ef2","name":"","serial":"7f2f8e1d.b680e","x":470,"y":40,"wires":[]},{"id":"e06b0e6d.d4dad","type":"http in","z":"d86d70f7.c6ef2","name":"","url":"/api/platform/getTag","method":"get","upload":false,"swaggerDoc":"","x":130,"y":80,"wires":[["2ce2370a.b93cd8","574224d0.138ecc"]]},{"id":"7f640c07.871314","type":"function","z":"d86d70f7.c6ef2","name":"RFID SEND","func":"msg.payload = {\n    \"rfid\": flow.get(\"keycode\")\n}\n//flow.set('rfid',\"\");\n\n\n\nmsg.res = flow.get(\"res\",msg.res);\nmsg.req = flow.set(\"req\",msg.req);\nreturn msg;","outputs":1,"noerr":0,"x":530,"y":220,"wires":[["6557823b.b9efdc"]]},{"id":"574224d0.138ecc","type":"debug","z":"d86d70f7.c6ef2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":350,"y":80,"wires":[]},{"id":"be5d14c.a7cd7e8","type":"debug","z":"d86d70f7.c6ef2","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":290,"y":280,"wires":[]},{"id":"82384b9.92b29b8","type":"inject","z":"d86d70f7.c6ef2","name":"Остання мітка","topic":"","payload":"keycode","payloadType":"flow","repeat":"","crontab":"","once":false,"onceDelay":0.1,"x":120,"y":280,"wires":[["be5d14c.a7cd7e8"]]}]
