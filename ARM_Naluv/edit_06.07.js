[{"id":"26b8efa4.b5889","type":"http in","z":"cc7f4781.416d88","name":"","url":"/k1/status/data","method":"get","swaggerDoc":"","x":1167.1111221313477,"y":101.11111450195312,"wires":[["d23e36a1.d93ff8"]]},{"id":"d23e36a1.d93ff8","type":"function","z":"cc7f4781.416d88","name":"with_1C","func":"//var order = msg.payload;\nvar regime_get1 = \n{\n  \"counterr\": 0,\n  \"t_flow_middle\": 0,\n  \"Plotnost_middle\": 0,\n  \"Counter1M\":0,\n  \n };\nmsg.payload = regime_get1;\nflow.set('regime_get1',regime_get1);\nflow.set('res2',msg.res);\nmsg.res = '';\nmsg.req = '';\nreturn msg;","outputs":"1","noerr":0,"x":1421.5438842773438,"y":75.65235710144043,"wires":[["ea89e6d9.200108"]]},{"id":"ea89e6d9.200108","type":"function","z":"cc7f4781.416d88","name":"5706+1_Counterr_1v","func":"\nmsg.payload = { \n    'fc': 3, \n    'unitid': 1, \n    'address': 5706 , \n    'quantity': 2 \n    \n} ;\nreturn msg;","outputs":"1","noerr":0,"x":1326.3965187072754,"y":150.9206075668335,"wires":[["12ccafae.4edfe"]]},{"id":"12ccafae.4edfe","type":"modbus-flex-getter","z":"cc7f4781.416d88","name":"","showStatusActivities":false,"showErrors":false,"server":"9f490d57.ef514","x":1544.1424102783203,"y":151.31746006011963,"wires":[["9ee334ef.de04a8"],[]]},{"id":"9ee334ef.de04a8","type":"function","z":"cc7f4781.416d88","name":"conver_to float","func":"var buf = new ArrayBuffer(4);\nvar intView = new Uint16Array(buf);\nvar fltView = new Float32Array(buf);\n\nintView[0] = msg.payload[0]; //low\nintView[1] = msg.payload[1]; //high\n\nmsg.payload = parseFloat(fltView[0].toFixed(2));\n\nreturn msg;","outputs":1,"noerr":0,"x":1744.4443740844727,"y":144.44444274902344,"wires":[["f9ec29c8.49bac8"]]},{"id":"f9ec29c8.49bac8","type":"function","z":"cc7f4781.416d88","name":"5718+1_T_flow_middle","func":"var regime_get1 = flow.get('regime_get1');\nregime_get1.counterr = msg.payload;\nflow.set('regime_get1',regime_get1);\n\nmsg.payload = { \n    'fc': 3, \n    'unitid': 1, \n    'address': 5718 , \n    'quantity': 2 \n    \n} ;\nreturn msg;","outputs":"1","noerr":0,"x":1327.7777481079102,"y":218.88888549804688,"wires":[["663c0efb.83d5a"]]},{"id":"663c0efb.83d5a","type":"modbus-flex-getter","z":"cc7f4781.416d88","name":"","showStatusActivities":false,"showErrors":false,"server":"9f490d57.ef514","x":1552.5237350463867,"y":226.14289474487305,"wires":[["c6ed546b.b732a8"],[]]},{"id":"c6ed546b.b732a8","type":"function","z":"cc7f4781.416d88","name":"conver_to float","func":"var buf = new ArrayBuffer(4);\nvar intView = new Uint16Array(buf);\nvar fltView = new Float32Array(buf);\n\nintView[0] = msg.payload[0]; //low\nintView[1] = msg.payload[1]; //high\n\nmsg.payload = parseFloat(fltView[0].toFixed(2));\n\nreturn msg;","outputs":1,"noerr":0,"x":1756.6823844909668,"y":221.94835090637207,"wires":[["779dc911.36ebd8"]]},{"id":"779dc911.36ebd8","type":"function","z":"cc7f4781.416d88","name":"5730+1_Plotnost_middle","func":"var regime_get1 = flow.get('regime_get1');\nregime_get1.t_flow_middle = msg.payload;\nflow.set('regime_get1',regime_get1);\n\nmsg.payload = { \n    'fc': 3, \n    'unitid': 1, \n    'address': 5730 , \n    'quantity': 2 \n    \n} ;\nreturn msg;","outputs":"1","noerr":0,"x":1343.3332901000977,"y":293.33331298828125,"wires":[["93ef496f.46ca98"]]},{"id":"93ef496f.46ca98","type":"modbus-flex-getter","z":"cc7f4781.416d88","name":"","showStatusActivities":false,"showErrors":false,"server":"9f490d57.ef514","x":1606.6506958007812,"y":292.0159206390381,"wires":[["9e32d901.197208"],[]]},{"id":"9e32d901.197208","type":"function","z":"cc7f4781.416d88","name":"conver_to float","func":"var buf = new ArrayBuffer(4);\nvar intView = new Uint16Array(buf);\nvar fltView = new Float32Array(buf);\n\nintView[0] = msg.payload[0]; //low\nintView[1] = msg.payload[1]; //high\n\nmsg.payload = parseFloat(fltView[0].toFixed(4));\n\nreturn msg;","outputs":1,"noerr":0,"x":1822.2380142211914,"y":294.964262008667,"wires":[["64803d64.1204c4"]]},{"id":"64803d64.1204c4","type":"function","z":"cc7f4781.416d88","name":"5742_Counter1M","func":"var regime_get1 = flow.get('regime_get1');\nregime_get1.Plotnost_middle = msg.payload;\nflow.set('regime_get1',regime_get1);\n\nmsg.payload = { \n    'fc': 3, \n    'unitid': 1, \n    'address': 5742 , \n    'quantity': 2 \n    \n} ;\nflow.set('res',msg.res);\nmsg.req = '';\nmsg.res = '';\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1304.4444198608398,"y":387.7777690887451,"wires":[["4db0e40c.31df8c"]]},{"id":"4db0e40c.31df8c","type":"modbus-flex-getter","z":"cc7f4781.416d88","name":"","showStatusActivities":false,"showErrors":false,"server":"9f490d57.ef514","x":1546.6667175292969,"y":387.77802562713623,"wires":[["ebca6feb.d25c3"],[]]},{"id":"ebca6feb.d25c3","type":"function","z":"cc7f4781.416d88","name":"conver_to float","func":"var buf = new ArrayBuffer(4);\nvar intView = new Uint16Array(buf);\nvar fltView = new Float32Array(buf);\n\nintView[0] = msg.payload[0]; //low\nintView[1] = msg.payload[1]; //high\n\nmsg.payload = parseFloat(fltView[0].toFixed(2));\n\nreturn msg;","outputs":1,"noerr":0,"x":1767.9365463256836,"y":384.92071628570557,"wires":[["75a687f9.739338"]]},{"id":"75a687f9.739338","type":"function","z":"cc7f4781.416d88","name":"5742_Counter1M","func":"var regime_get1 = flow.get('regime_get1');\nregime_get1.Counter1M = msg.payload;\nflow.set('regime_get1',regime_get1);\n\nmsg.payload = { \n    'fc': 3, \n    'unitid': 1, \n    'address': 5742 , \n    'quantity': 2 \n    \n} ;\nflow.set('res',msg.res);\nmsg.req = '';\nmsg.res = '';\nreturn msg;\n\n","outputs":1,"noerr":0,"x":1297.0369873046875,"y":466.6666564941406,"wires":[["e0c24af5.f33ed8"]]},{"id":"e0c24af5.f33ed8","type":"function","z":"cc7f4781.416d88","name":"","func":"\nreturn msg;","outputs":1,"noerr":0,"x":1504.5196685791016,"y":473.9681234359741,"wires":[["237394e1.7d648c"]]},{"id":"237394e1.7d648c","type":"function","z":"cc7f4781.416d88","name":"response","func":"msg.res = flow.get('res2');\nmsg.payload = flow.get('regime_get1');\nreturn msg;","outputs":1,"noerr":0,"x":1683.0871696472168,"y":471.05934047698975,"wires":[["bd403070.18e81","1cabb2c4.14f85d"]]},{"id":"bd403070.18e81","type":"http response","z":"cc7f4781.416d88","name":"","x":1921.1110000610352,"y":468.8888854980469,"wires":[]},{"id":"1cabb2c4.14f85d","type":"debug","z":"cc7f4781.416d88","name":"","active":true,"console":"false","complete":"payload","x":1940.099250793457,"y":505.5196313858032,"wires":[]},{"id":"9f490d57.ef514","type":"modbus-client","z":"","name":"","clienttype":"tcp","bufferCommands":true,"stateLogEnabled":false,"tcpHost":"192.168.5.201","tcpPort":"502","tcpType":"DEFAULT","serialPort":"/dev/ttyUSB","serialType":"RTU-BUFFERD","serialBaudrate":"9600","serialDatabits":"8","serialStopbits":"1","serialParity":"none","serialConnectionDelay":"100","unit_id":"1","commandDelay":"1","clientTimeout":"1000","reconnectTimeout":"2000"}]
